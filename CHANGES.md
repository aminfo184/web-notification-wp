# ุชุบุฑุงุช ุงูุฌุงู ุดุฏู ุฏุฑ ุณุณุชู ุงุฑุณุงู ููุชูฺฉุดู

## ๐ฅ **ูุดฺฉู ุญู ุดุฏู**
**ูุดฺฉู ุงุตู:** ุนุฏู ูุตุจ ูพฺฉุฌ `web-push-php` ฺฉู ุจุงุนุซ ุนุฏู ฺฉุงุฑฺฉุฑุฏ ููุชูฺฉุดูโูุง ูโุดุฏ.

**ุฑุงูโุญู:** ุงุฌุงุฏ ูพุงุฏูโุณุงุฒ ุณุงุฏู ุจุฏูู dependency.

## ุฎูุงุตู ุชุบุฑุงุช

### 1. ุงุฌุงุฏ ฺฉูุงุณโูุง ุณุงุฏู (`simple-vapid.php`)
- **ฺฉูุงุณ `WNW_Simple_VAPID`** ุจุฑุง ุชููุฏ ฺฉูุฏูุง VAPID
- **ฺฉูุงุณ `WNW_Simple_WebPush`** ุจุฑุง ุงุฑุณุงู ููุชูฺฉุดูโูุง
- **ุจุฏูู ูุงุจุณุชฺฏ ุฎุงุฑุฌ** - ููุท ุงุฒ PHP ู cURL ุงุณุชูุงุฏู ูโฺฉูุฏ
- **ุณุงุฒฺฏุงุฑ ุจุง OpenSSL** ุจุฑุง ุชููุฏ ฺฉูุฏูุง ECC

### 2. ุงุฌุงุฏ ุณุณุชู ูพุฑุฏุงุฒุด ุฌุฏุฏ (`background-processor.php`)
- **ุฌุงฺฏุฒู ุณุณุชู wp-cron** ุจุง ฺฉ ุณุณุชู ูุณุชูู
- **ูพุฑุฏุงุฒุด ูพุณโุฒููู** ุจุง ุงุณุชูุงุฏู ุงุฒ AJAX ู ุฏุฑุฎูุงุณุชโูุง ุบุฑ ูุณุฏูุฏฺฉููุฏู
- **ฺฉูุชุฑู ุฏูู ุจุฑ ุชุนุฏุงุฏ ุงุฑุณุงู** ุฏุฑ ูุฑ ุฏููู (batch_size)
- **ูุฏุฑุช ูุถุนุช** ุดุฑูุน/ุชููู ูพุฑุฏุงุฒุด ุงุฒ ุทุฑู ุงุฏูู
- **ุดุฑูุน ุฎูุฏฺฉุงุฑ** ุฏุฑ ุตูุฑุช ูุฌูุฏ ุขุชูโูุง ุฏุฑ ุงูุชุธุงุฑ

### 3. ุจูุจูุฏ API Routes (`api-routes.php`)
- **3 endpoint ุฌุฏุฏ**:
  - `POST /wp-json/wnw/v1/send/user` - ุงุฑุณุงู ุจู ฺฉุงุฑุจุฑ ูุดุฎุต
  - `POST /wp-json/wnw/v1/send/users` - ุงุฑุณุงู ุจู ูุณุช ฺฉุงุฑุจุฑุงู
  - `POST /wp-json/wnw/v1/send/custom` - ุงุฑุณุงู ุจุง ูุญุชูุง ุณูุงุฑุด
  - `GET /wp-json/wnw/v1/test` - ุชุณุช API ู ุจุฑุฑุณ ูุถุนุช
- **ุงุฑุณุงู ููุฑ ุจุฏูู ุตู** ุจุฑุง ุงุณุชูุงุฏู ุงุฒ API
- **ุงูุนุทุงูโูพุฐุฑ** ุฏุฑ ุงุณุชูุงุฏู ุงุฒ template ุง ูุญุชูุง ุฏูุฎูุงู

### 4. ุจูโุฑูุฒุฑุณุงู Dashboard (`dashboard-template.php`)
- **ฺฉูุชุฑูโูุง ุฌุฏุฏ** ุจุฑุง ูุฏุฑุช ุณุณุชู ุงุฑุณุงู
- **ุขูุงุฑ ฺฉุงูู** ุงุฒ ูุถุนุช ุตู ู ููุชูฺฉุดูโูุง
- **ุจูโุฑูุฒุฑุณุงู ุฒูุฏู** ูุถุนุช ูุฑ 30 ุซุงูู
- **ุชูุธูุงุช ุณุฑุน** batch_size
- **ุฑุงูููุง API** ู ุฑูุน ูุดฺฉู

### 5. ุญูุธ ุณุงุฒฺฏุงุฑ (`cron-handler.php`)
- **ูฺฏูโุฏุงุฑ ุณุณุชู ูุฏู** ุจู ุนููุงู fallback
- **ุชุฑฺฉุจ ููุดููุฏ** ุณุณุชู ุฌุฏุฏ ู ูุฏู
- **ุชุงุจุน ฺฉูฺฉ** `wnw_add_to_queue` ุจุฑุง ุงุถุงูู ฺฉุฑุฏู ุจู ุตู

### 6. ุจูโุฑูุฒุฑุณุงู ูุงู ุงุตู (`web-notification-wp.php`)
- **ุบุฑูุนุงู ฺฉุฑุฏู wp-cron ูุฏู**
- **ุจุงุฑฺฏุฐุงุฑ ูุงู ุฌุฏุฏ simple-vapid.php**
- **ูพุงฺฉุณุงุฒ cron jobs** ุฏุฑ ููฺฏุงู ุบุฑูุนุงูโุณุงุฒ

## ูุฒุงุง ุณุณุชู ุฌุฏุฏ

1. **โ ุนููฺฉุฑุฏ ุจูุชุฑ**: ุนุฏู ูุงุจุณุชฺฏ ุจู wp-cron ฺฉู ููฺฉู ุงุณุช ฺฉุงุฑ ูฺฉูุฏ
2. **๐๏ธ ฺฉูุชุฑู ุฏููโุชุฑ**: ุงูฺฉุงู ุดุฑูุน/ุชููู ุฏุณุช ูพุฑุฏุงุฒุด
3. **โก ุงุฑุณุงู ุณุฑุนโุชุฑ**: ุณุณุชู ูพุฑุฏุงุฒุด ูพุณโุฒููู ูุณุชูู
4. **๐ API ูุฏุฑุชููุฏ**: ุงูฺฉุงู ุงุฑุณุงู ููุฑ ุงุฒ ุทุฑู API
5. **๐ ูุงูุชูุฑูฺฏ ุจูุชุฑ**: ููุงุด ูุถุนุช ุฒูุฏู ุฏุฑ dashboard
6. **๐ ููุงุณโูพุฐุฑ**: ุชูุธู ุชุนุฏุงุฏ ุงุฑุณุงู ุฏุฑ ูุฑ ุฏููู
7. **๐ก๏ธ ุจุฏูู dependency**: ุนุฏู ูุงุจุณุชฺฏ ุจู ูพฺฉุฌโูุง ุฎุงุฑุฌ

## ูุญูู ุงุณุชูุงุฏู

### ุงุฒ ุทุฑู Dashboard:
1. ุจู `/wp-admin/admin.php?page=web-notification-wp-dashboard` ุจุฑูุฏ
2. ุฏฺฉูู "ุดุฑูุน ูพุฑุฏุงุฒุด" ุฑุง ฺฉูฺฉ ฺฉูุฏ
3. ุชุนุฏุงุฏ ุงุฑุณุงู ุฏุฑ ูุฑ ุฏููู ุฑุง ุชูุธู ฺฉูุฏ
4. ุขูุงุฑ ุฑุง ูุดุงูุฏู ฺฉูุฏ

### ุงุฒ ุทุฑู API:

#### ุงุฑุณุงู ุจู ฺฉุงุฑุจุฑ ูุดุฎุต:
```bash
curl -X POST "http://yoursite.com/wp-json/wnw/v1/send/user" \
-H "Content-Type: application/json" \
-d '{
  "user_id": 1,
  "title": "ุนููุงู ููุชู",
  "message": "ูุชู ูพุงู",
  "url": "https://example.com"
}'
```

#### ุงุฑุณุงู ุจู ููู ฺฉุงุฑุจุฑุงู:
```bash
curl -X POST "http://yoursite.com/wp-json/wnw/v1/send/custom" \
-H "Content-Type: application/json" \
-d '{
  "title": "ุงุทูุงุนู ุนููู",
  "message": "ุงู ูพุงู ุจุฑุง ููู ฺฉุงุฑุจุฑุงู ุงุฑุณุงู ูโุดูุฏ",
  "user_ids": "all"
}'
```

#### ุชุณุช API:
```bash
curl -X GET "http://yoursite.com/wp-json/wnw/v1/test"
```

## ูฺฉุงุช ููู

1. **๐ ุจุฑุฑุณ ฺฉูุฏูุง VAPID**: ูุทูุฆู ุดูุฏ ฺฉู ุฏุฑ ุชูุธูุงุช ูพูุงฺฏู ฺฉูุฏูุง VAPID ุชููุฏ ุดุฏูโุงูุฏ
2. **๐ ูุฌูุฒ ูุฑูุฑฺฏุฑ**: ฺฉุงุฑุจุฑุงู ุจุงุฏ ุงุฌุงุฒู ููุงุด ููุชูฺฉุดู ุฑุง ุจู ุณุงุช ุฏุงุฏู ุจุงุดูุฏ
3. **โ๏ธ Service Worker**: ูุงู service-worker.js ุจุงุฏ ูุงุจู ุฏุณุชุฑุณ ุจุงุดุฏ
4. **๐ ุจุฑูุฒุฑุณุงู ุชุฏุฑุฌ**: ุณุณุชู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงุฒ cron ูุฏู ุจู ุณุณุชู ุฌุฏุฏ ููุงุฌุฑุช ูโฺฉูุฏ
5. **๐ HTTPS**: Web Push ููุท ุฑู HTTPS ฺฉุงุฑ ูโฺฉูุฏ (localhost ูุณุชุซู ุงุณุช)

## ุฑูุน ูุดฺฉู

ุงฺฏุฑ ููุชูฺฉุดูโูุง ุงุฑุณุงู ููโุดููุฏ:
1. **ุฏุฑ ุชูุธูุงุช ูพูุงฺฏู** ฺฉูุฏูุง VAPID ุฑุง ุชููุฏ ฺฉูุฏ
2. **ุณุณุชู ุงุฑุณุงู** ุฑุง ูุชููู ู ูุฌุฏุฏุงู ุดุฑูุน ฺฉูุฏ
3. **ุฏุฑ ฺฉูุณูู ูุฑูุฑฺฏุฑ** ุฎุทุงูุง JavaScript ุฑุง ุจุฑุฑุณ ฺฉูุฏ
4. **ูุทูุฆู ุดูุฏ** ฺฉู URL service worker ุฏุฑุณุช ุงุณุช (`/service-worker.js`)
5. **API ุชุณุช** ุฑุง ุงุฌุฑุง ฺฉูุฏ: `/wp-json/wnw/v1/test`

## ูพุดุชุจุงู

ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉูุ ุณุณุชู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุจู ุฑูุด ูุฏู (wp-cron) ุจุงุฒฺฏุดุช ูโฺฉูุฏ ุชุง ุนููฺฉุฑุฏ ูพูุงฺฏู ูุฎุชู ูุดูุฏ.

**โจ ูุชุฌู:** ุญุงูุง ููุชูฺฉุดูโูุง ุจุงุฏ ฺฉุงููุงู ฺฉุงุฑ ฺฉููุฏ!